---
layout: post
title: "java.util.Arrays"
description: "java.util.Arrays"
category: 
tags: [JDK]
---
{% include JB/setup %}

### 概述 

Arrays是操作数组的的工具类，主要包含的功能有：
- 提供了操作数组的方法，例如排序和搜索
- 提供了将数组作为列表操作的静态工厂

主要的方法和类有：
- NaturalOrder
- rangeCheck
- sort及其重载方法
- parallelSort及其重载方法
- sort及其重载方法
- legacyMergeSort及其重载方法
- mergeSort及其重载方法
- parallelPrefix及其重载方法
- binarySearch及其重载方法
- equals及其重载方法
- fill及其重载方法
- copyOf及其重载方法
- copyOfRange及其重载方法

### Sort方法的实现

`Arrays.sort`作为java里通用的排序算法，它必须保证其算法的高效和通用。

首先，从通用性上来讲，它必须能够支持java里的基本类型和对象类型。基本类型的实现方式比较简单，就是为每种类型单独重载一套方法。对象类型的实现分为两种：一种是实现了`java.lang.Comparable`接口，一种是直接提供`java.uitl.Comparator`作为比较器进行排序的。对于这两种也都是通过重载的方式来实现的。

其次，就是排序的效率问题了，从通用算法的角度来看，必须要考虑时间和空间的效率。

－ 排序最重要的是效率，所以首先会选择最快的算法
－ 其次，算法使用的空间也是一个很重要的参数，所以会优先选择原地排序的算法
－ 最后，算法的稳定性也很重要，作为通用算法，必须满足绝大部分的使用场景，所以稳定的算法能够保证不会因为数据的问题而导致算法的执行效率会退化

首先，我们来参考一下常用的排序算法：
![](/images/sort.png)

从上面的结果上可以看出，满足inplace和stable的只有插入排序算法，但是插入排序的效率不是很高，平均还是O(n^2)。所以我们从效率上来考虑我们还是会选择更加快速的算法。再看看满足inplace和效率的算法，就只剩下quick和3-way quick的算法了，3-way quick是对quick算法的改进算法，在效率和稳定性上比quicksort更好。

这样，看来，貌似我们已经知道系统的sort方法是直接通过3-way quick算法来实现的了。但是，实际实现上还是有一定的差别的，下面来看看实际的代码实现。






